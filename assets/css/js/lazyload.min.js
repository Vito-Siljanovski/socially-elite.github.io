!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).LazyLoad=e()}(this,function(){"use strict";function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,a=arguments[e];for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}function o(t){return e({},q,t)}function t(t,e){var n,a="LazyLoad::Initialized",e=new t(e);try{n=new CustomEvent(a,{detail:{instance:e}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(a,!1,!1,{instance:e})}window.dispatchEvent(n)}function u(t){return A(t)===J}function s(t,e){t&&(t.toLoadCount=e)}function n(t){for(var e,n=[],a=0;e=t.children[a];a+=1)"SOURCE"===e.tagName&&n.push(e);return n}function a(t,e,n){n&&t.setAttribute(e,n)}function i(t,e){t.removeAttribute(e)}function r(t){return!!t.llOriginalAttrs}function l(t){var e;r(t)||((e={}).src=t.getAttribute("src"),e.srcset=t.getAttribute("srcset"),e.sizes=t.getAttribute("sizes"),t.llOriginalAttrs=e)}function c(t,e){a(t,"sizes",y(t,e.data_sizes)),a(t,"srcset",y(t,e.data_srcset)),a(t,"src",y(t,e.data_src))}function d(t,e){var n=tt[t.tagName];n&&n(t,e)}function f(t,e){!e||0<e.loadingCount||0<e.toLoadCount||w(t.callback_finish,e)}function _(t,e,n){t.addEventListener(e,n),t.llEvLisnrs[e]=n}function g(t,e,n){delete t.llTempImage,z(n,-1),n&&--n.toLoadCount,O(t,e.class_loading),e.unobserve_completed&&x(t,n)}function v(t){return t.use_native&&"loading"in HTMLImageElement.prototype}function j(t,c,u){t.forEach(function(t){return t.isIntersecting||0<t.intersectionRatio?(r=t.target,o=t,s=c,l=u,I(r,"entered"),k(r,s.class_entered),O(r,s.class_exited),s.unobserve_entered&&x(r,l),w(s.callback_enter,r,o,l),void(0<=W.indexOf(A(r))||G(r,s,l))):(o=t.target,r=t,s=c,l=u,void(Q(o)||(k(o,s.class_exited),t=o,e=r,a=l,(n=s).cancel_on_exit&&A(t)===m&&"IMG"===t.tagName&&(M(t),C(i=t,function(t){Z(t)}),Z(i),C(i=t,function(t){Y(t)}),Y(i),O(t,n.class_loading),z(a,-1),L(t),w(n.callback_cancel,t,e,a)),w(s.callback_exit,o,r,l))));var e,n,a,i,r,o,s,l})}function D(t){return Array.prototype.slice.call(t)}function p(t){return t.container.querySelectorAll(t.elements_selector)}function F(t){return A(t)===E}function P(t,e){return t=t||p(e),D(t).filter(Q)}function b(t,e){var a,i,n,r,t=o(t);this._settings=t,this.loadingCount=0,n=t,r=this,V&&!v(n)&&(r._observer=new IntersectionObserver(function(t){j(t,n,r)},{root:n.container===document?null:n.container,rootMargin:n.thresholds||n.threshold+"px"})),a=t,i=this,h&&window.addEventListener("online",function(){var e,t,n;t=i,n=p(e=a),D(n).filter(F).forEach(function(t){O(t,e.class_error),L(t)}),t.update()}),this.update(e)}var h="undefined"!=typeof window,S=h&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),V=h&&"IntersectionObserver"in window,U=h&&"classList"in document.createElement("p"),$=h&&1<window.devicePixelRatio,q={elements_selector:".lazy",container:S||h?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},m="loading",H="loaded",B="applied",E="error",J="native",K="data-",y=function(t,e){return t.getAttribute(K+e)},A=function(t){return y(t,"ll-status")},I=function(t,e){var n;t=t,n="data-ll-status",null!==e?t.setAttribute(n,e):t.removeAttribute(n)},L=function(t){return I(t,null)},Q=function(t){return null===A(t)},W=[m,H,B,E],w=function(t,e,n,a){t&&(void 0===a?void 0===n?t(e):t(e,n):t(e,n,a))},k=function(t,e){U?t.classList.add(e):t.className+=(t.className?" ":"")+e},O=function(t,e){U?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},X=function(t){return t.llTempImage},x=function(t,e){e&&(e=e._observer)&&e.unobserve(t)},z=function(t,e){t&&(t.loadingCount+=e)},Y=function(t){var e;r(t)&&(e=t.llOriginalAttrs,a(t,"src",e.src),a(t,"srcset",e.srcset),a(t,"sizes",e.sizes))},Z=function(t){i(t,"src"),i(t,"srcset"),i(t,"sizes")},C=function(t,e){t=t.parentNode;t&&"PICTURE"===t.tagName&&n(t).forEach(e)},tt={IMG:function(t,e){C(t,function(t){l(t),c(t,e)}),l(t),c(t,e)},IFRAME:function(t,e){a(t,"src",y(t,e.data_src))},VIDEO:function(t,e){n(t).forEach(function(t){a(t,"src",y(t,e.data_src))}),a(t,"poster",y(t,e.data_poster)),a(t,"src",y(t,e.data_src)),t.load()}},et=function(t,e,n){z(n,1),k(t,e.class_loading),I(t,m),w(e.callback_loading,t,n)},nt=["IMG","IFRAME","VIDEO"],at=function(t,e,n){t.removeEventListener(e,n)},N=function(t){return!!t.llEvLisnrs},M=function(t){if(N(t)){var e,n=t.llEvLisnrs;for(e in n){var a=n[e];at(t,e,a)}delete t.llEvLisnrs}},R=function(o,s,l){var t,e,c=X(o)||o;N(c)||(N(t=c)||(t.llEvLisnrs={}),e="VIDEO"===t.tagName?"loadeddata":"load",_(t,e,function(t){var e=0,n=o,a=s,i=l,r=u(n);g(n,a,i),k(n,a.class_loaded),I(n,H),w(a.callback_loaded,n,i),r||f(a,i),M(c)}),_(t,"error",function(t){var e=0,n=o,a=s,i=l,r=u(n);g(n,a,i),k(n,a.class_error),I(n,E),w(a.callback_error,n,i),r||f(a,i),M(c)}))},G=function(t,e,n){var a,i,r,o,s;-1<nt.indexOf(t.tagName)?(R(i=t,r=e,a=n),d(i,r),et(i,r,a)):(i=e,r=n,(a=t).llTempImage=document.createElement("IMG"),R(a,i,r),e=r,o=y(n=a,(t=i).data_bg),s=y(n,t.data_bg_hidpi),(s=$&&s?s:o)&&(n.style.backgroundImage='url("'.concat(s,'")'),X(n).setAttribute("src",s),et(n,t,e)),o=r,t=y(s=a,(n=i).data_bg_multi),e=y(s,n.data_bg_multi_hidpi),(e=$&&e?e:t)&&(s.style.backgroundImage=e,t=o,k(e=s,(o=n).class_applied),I(e,B),o.unobserve_completed&&x(e,o),w(o.callback_applied,e,t)))},it=["IMG","IFRAME"];if(b.prototype={update:function(t){var e,n,a,i,r=this._settings,t=P(t,r);s(this,t.length),!S&&V?v(r)?(a=r,i=this,t.forEach(function(t){var e;-1!==it.indexOf(t.tagName)&&(t.setAttribute("loading","lazy"),R(t=t,e=a,i),d(t,e),I(t,J))}),s(i,0)):(r=t,(e=this._observer).disconnect(),n=e,r.forEach(function(t){n.observe(t)})):this.loadAll(t)},destroy:function(){this._observer&&this._observer.disconnect(),p(this._settings).forEach(function(t){delete t.llOriginalAttrs}),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){var e=this,n=this._settings;P(t,n).forEach(function(t){x(t,e),G(t,n,e)})}},b.load=function(t,e){e=o(e);G(t,e)},b.resetStatus=function(t){L(t)},h){var rt=b,T=window.lazyLoadOptions;if(T)if(T.length)for(var ot,st=0;ot=T[st];st+=1)t(rt,ot);else t(rt,T)}return b});